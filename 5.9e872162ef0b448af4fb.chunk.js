(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{a6c473625bbd54b0af08:function(e,t,n){"use strict";n.r(t);var a=n("8af190b70a6bc55c6f1b"),o=n.n(a),i=n("d7dd51e1bf6bfc2c9c3d"),s=n("0d7f0986bcd2f33d8a2a"),r=n("ab039aecd4a1d4fedc0e"),c=n("a28fc3c963a1d4d1a2e5"),u=n("ab4cb61bcb2dc161defb"),l=n("564c8c4ff52cdb2e6d5a"),d=n("73bb0e359204f9566244"),p=n("2760b29483951a0e3f5e"),f=n("66161a7d238c7f61b062"),b=n("9655914107fe44b7cb00"),m=n("d95b0cf107403b178365"),h=n("a43d99cc1e16b8f29170"),v=n("54f683fcda7806277002"),g="Tags/DEFAULT_DATA",y="Tags/GET_DATA",w="Tags/GET_DATA_SUCCESS",S="Tags/SUBMIT_ADD",D="Tags/SUBMIT_ADD_SUCCESS",E="Tags/SUBMIT_ADD_ERROR",_="Tags/SUBMIT_EDIT",T="Tags/SUBMIT_EDIT_SUCCESS",O="Tags/SUBMIT_EDIT_ERROR",R="Tags/SUBMIT_DELETE",k="Tags/SUBMIT_DELETE_SUCCESS",C="Tags/SUBMIT_DELETE_ERROR",P=Object(v.fromJS)({});var N,j=n("745531522372311f22bf"),A={onDefaultAction:function(e){var t=e.dispatch;return function(e){return function(n){e(n),"Tags/DEFAULT_ACTION"===n.type&&t({type:g,payload:n.payload})}}},onGetData:function(e){var t=e.dispatch;return function(e){return function(n){e(n),n.type===y&&Object(j.a)("base/sleek/getData",n.payload).then(function(e){t({type:w,payload:e.data[0]})})}}},onSubmitAdd:function(e){var t=e.dispatch;return function(e){return function(n){e(n),n.type===S&&Object(j.a)("base/sleek/executeMutation",n.payload).then(function(e){e.success_message?t({type:D}):t({type:E})})}}},onSubmitEdit:function(e){var t=e.dispatch;return function(e){return function(n){e(n),n.type===_&&Object(j.a)("base/sleek/executeMutation",n.payload).then(function(e){e.success_message?t({type:T}):t({type:O})})}}},onSubmitDelete:function(e){var t=e.dispatch;return function(e){return function(n){e(n),n.type===R&&Object(j.a)("base/sleek/executeMutation",n.payload).then(function(e){e.success_message?t({type:k}):t({type:C})})}}}},L=Object(m.a)({key:"tags",reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments[1];switch(t.type){case g:return e.set("defaultData",t.payload);case y:return e.set("getDataLoading",!0).set("tagsData",[]).set("totalRows",0);case w:return e.set("tagsData",t.payload.rows).set("totalRows",t.payload.total).set("getDataLoading",!1);case S:return e.set("submitAddLoading",!0).set("submitAddSuccess",!1).set("submitAddError",!1);case D:return e.set("submitAddLoading",!1).set("submitAddSuccess",!0);case E:return e.set("submitAddLoading",!1).set("submitAddError",!0);case _:return e.set("submitEditLoading",!0).set("submitEditSuccess",!1).set("submitEditError",!1);case T:return e.set("submitEditLoading",!1).set("submitEditSuccess",!0);case O:return e.set("submitEditLoading",!1).set("submitEditError",!0);case R:return e.set("submitDeleteLoading",!0).set("submitDeleteSuccess",!1).set("submitDeleteError",!1);case k:return e.set("submitDeleteLoading",!1).set("submitDeleteSuccess",!0);case C:return e.set("submitDeleteLoading",!1).set("submitDeleteError",!0);default:return e}}}),M=Object(h.a)({key:"tags",middleware:A}),I=n("7b6138c08ac93776912a"),B=n.n(I),U=n("f2a0a9b443783f48e935"),x=n.n(U),$=function(e){return e.get("tags",P)},F=function(e){return Object(c.a)($,function(t){return B()(e)||x()(e)||""===e?t.toJS():t.get(e)})},J=Object(r.defineMessages)({header:{id:"app.containers.Tags.header",defaultMessage:"Tags"}}),V=n("1629e504fac1da2707a5"),W=n.n(V),G=n("78fa96844e886aa1cefe"),q=(n("8a2d1b95e05b6a321e74"),n("4a278605b12780b66444")),H=n("5980e6126d53c0c5357d"),Y=(N="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,function(e,t,n,a){var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={}),t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var r=Array(i),c=0;c<i;c++)r[c]=arguments[c+3];t.children=r}return{$$typeof:N,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}),z=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var K=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={input:{name:"",description:""},errors:{},inputValidations:{name:{label:"Tag Name",validator:[H.a.Type.required()]},description:{label:"Description",validator:[]}}},n.handleSubmitClicked=n.handleSubmitClicked.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.a.Component),z(t,[{key:"componentWillMount",value:function(){var e=this.props.data;e&&this.setState({input:{name:e.name,description:e.description}})}},{key:"componentWillReceiveProps",value:function(e){e.isReset!==this.props.isReset&&this.setState({input:{name:"",description:""},errors:{}})}},{key:"onChangeInput",value:function(e,t){var n=this.state,a=n.input,o=n.inputValidations;a[e]=t;var i=H.a.RunValidate(e,a,o);this.setState({input:a,errors:i})}},{key:"handleSubmitClicked",value:function(e){e.preventDefault();var t=this.state,n=t.input,a=t.inputValidations,o=H.a.RunValidateAll(n,a),i=Object.keys(o);if(0===i.length){if(this.props.onSubmit){var s=Object.assign({},n);delete s.touched,this.props.onSubmit(s)}}else this.setState({errors:o}),window.$('[name="'+i[0]+'"]').focus()}},{key:"render",value:function(){var e=this,t=this.state,n=t.input,a=t.inputValidations,o=t.errors,i=JSON.stringify({input:n,errors:o})!==JSON.stringify({input:{name:"",description:""},errors:{}});return Y("form",{onSubmit:this.handleSubmitClicked},void 0,Y("div",{className:"panel-body pa-20"},void 0,Y("div",{className:"row"},void 0,Y("div",{className:"col-md-12"},void 0,Y("label",{},void 0,a.name.label),Y(q.a,{type:"text",className:"form-control",placeholder:a.name.label,name:"name",value:n.name,error:o.name,onChange:function(t){e.onChangeInput("name",t.target.value)}})),Y("div",{className:"col-md-12"},void 0,Y("label",{},void 0,a.description.label),Y(q.a,{type:"textarea",className:"form-control",placeholder:a.description.label,name:"description",value:n.description,error:o.description,onChange:function(t){e.onChangeInput("description",t.target.value)}})))),Y("div",{className:"panel-footer p-15"},void 0,Y("button",{type:"submit",className:"btn btn-success mr-5"},void 0,"Save"),this.props.onCancel&&Y("button",{type:"button",className:"btn btn-danger",onClick:function(){e.props.onCancel&&e.props.onCancel()}},void 0,Y("span",{},void 0,"Cancel")),this.props.onReset&&i&&Y("button",{type:"button",className:"btn btn-danger",onClick:function(){e.props.onReset&&e.props.onReset(),window.$('[name="name"]').focus()}},void 0,Y("span",{},void 0,"Reset"))))}}]),t}(),Q=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,a,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var r in i)void 0===n[r]&&(n[r]=i[r]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+3];n.children=c}return{$$typeof:e,type:t,key:void 0===a?null:""+a,ref:null,props:n,_owner:null}}}(),X=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Z=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},window.$("html").css("overflow","hidden"),n.dismiss=n.dismiss.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.a.Component),X(t,[{key:"dismiss",value:function(){var e=this.props.dismiss;window.$("html").css("overflow","auto"),e()}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.proceed,a=e.data;return Q(W.a,{width:400,visible:t,onClose:this.dismiss,showCloseButton:!1,closeOnEsc:!0,customStyles:{padding:0,height:"auto",bottom:"auto",top:"40%",transform:"translateY(-40%)"}},void 0,Q("div",{className:"panel panel-white ma-0"},void 0,Q("div",{className:"panel-heading"},void 0,Q("h6",{className:"panel-title text-bold"},void 0,a?"Edit":"Add New"," Tag"),Q("button",{type:"button",className:"close",onClick:this.dismiss,style:{position:"absolute",right:20,top:15,fontWeight:60}},void 0,Q("i",{className:"icon-cross"}))),Q(K,{data:a,onSubmit:function(e){window.$("html").css("overflow","auto"),n(e)},onCancel:this.dismiss})))}}]),t}(),ee=Object(G.confirmable)(Z);n.d(t,"Tags",function(){return ae});var te=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,a,o){var i=t&&t.defaultProps,s=arguments.length-3;if(n||0===s||(n={}),n&&i)for(var r in i)void 0===n[r]&&(n[r]=i[r]);else n||(n=i||{});if(1===s)n.children=o;else if(s>1){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+3];n.children=c}return{$$typeof:e,type:t,key:void 0===a?null:""+a,ref:null,props:n,_owner:null}}}(),ne=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var ae=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selectedRows:[],isResetForm:!1},n.selectedRowsId=[],n.pagination={currentPage:0,totalRows:1,rowsPerPage:10,totalPages:1},n.sortBy={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.a.Component),ne(t,[{key:"componentWillMount",value:function(){this.getData()}},{key:"componentWillReceiveProps",value:function(e){var t=e.submitAddSuccess,n=e.submitEditSuccess,a=e.submitDeleteSuccess,o=e.totalRows,i=void 0===o?0:o,s=e.getDataLoading,r=Math.ceil(i/this.pagination.rowsPerPage);s||r>0&&r<=this.pagination.currentPage&&(this.pagination.currentPage=0,this.getData()),t&&t!==this.props.submitAddSuccess&&(this.setState({isResetForm:!this.state.isResetForm}),this.getData()),n&&n!==this.props.submitEditSuccess&&this.getData(),a&&a!==this.props.submitDeleteSuccess&&this.getData()}},{key:"componentDidMount",value:function(){Object(b.a)()}},{key:"getData",value:function(){var e=this.pagination,t=e.currentPage,n=e.rowsPerPage;this.sortBy.type||(this.sortBy={value:"_id",type:"desc"}),this.setState({selectedRows:[]}),this.props.getData({name:"tags",options:[{limit:[t*n,n],sortBy:[this.sortBy.value,this.sortBy.type]}]})}},{key:"onSelectedRow",value:function(e){this.selectedRowsId=e.map(function(e){return e._id}),this.setState({selectedRows:e})}},{key:"onClickAdd",value:function(){var e=this;Object(f.b)(ee).then(function(t){e.props.submitAdd({name:"tags",type:"insert",data:{name:t.name,description:t.description}})})}},{key:"onClickEdit",value:function(){var e=this,t=this.state.selectedRows;Object(f.b)(ee,{data:t[0]}).then(function(n){e.props.submitEdit({name:"tags",type:"update",data:{name:n.name,description:n.description},where:[{condition:["_id","=",t[0]._id]}]})})}},{key:"onClickDelete",value:function(){var e=this;Object(f.a)({title:"Delete Confirmation",message:"Are you sure you want to delete selected records ?"}).then(function(){e.props.submitDelete({name:"tags",type:"delete",where:[{condition:["_id","in",e.selectedRowsId]}]})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectedRows,a=t.isResetForm,i=this.props,c=i.getDataLoading,u=i.tagsData,f=void 0===u?[]:u,b=i.totalRows,m=void 0===b?0:b,h=Math.ceil(m/this.pagination.rowsPerPage);return te(l.a,{},void 0,te(s.Helmet,{},void 0,te("title",{},void 0,"Tags"),te("meta",{name:"description",content:"Description of Tags"})),te("div",{className:"page-header bg-white"},void 0,te("div",{className:"page-header-content pl-5"},void 0,te("div",{className:"page-title p-10"},void 0,te("h4",{},void 0,o.a.createElement(r.FormattedMessage,J.header))))),te("div",{className:"content pa-20"},void 0,te("div",{className:"row"},void 0,te("div",{className:"col-md-4"},void 0,te("div",{className:"panel panel-white"},void 0,te("div",{className:"panel-heading"},void 0,te("h6",{className:"panel-title text-bold"},void 0,"Add New Tag")),te(K,{onSubmit:function(t){e.props.submitAdd({name:"tags",type:"insert",data:{name:t.name,description:t.description}})},onReset:function(){e.setState({isResetForm:!a})},isReset:a}))),te("div",{className:"col-md-8"},void 0,te("div",{className:"panel"},void 0,te(d.a,{headers:[{text:"Tag Name",value:"name",sortable:!0,align:"left"},{text:"Description",value:"description",render:function(e){return te("span",{},void 0,e.description||"-")},sortable:!0,align:"left"},{text:"Count",value:"posts_count",width:50,sortable:!0,align:"right"}],items:f,onSelectedRow:function(t){return e.onSelectedRow(t)},isAsyncSort:!0,onSorted:function(t){e.sortBy=t,e.getData()},isLoading:c}),te("hr",{className:"ma-0"}),!c&&h>1&&te("div",{className:"ma-10 mt-20"},void 0,te("p",{},void 0,"Showing"," ",te("b",{},void 0,this.pagination.currentPage*this.pagination.rowsPerPage+1)," to ",this.pagination.currentPage*this.pagination.rowsPerPage+f.length," ","of ",m," rows"),te(p.a,{forcePage:this.pagination.currentPage,pageCount:h,onPageChange:function(t){e.pagination.currentPage=t.selected,e.getData()}}))),te("div",{},void 0,te("div",{className:"heading-btn-group"},void 0,1===n.length&&te("button",{className:"btn bg-teal mr-5",onClick:function(){e.onClickEdit()}},void 0,te("span",{},void 0," Edit")),n.length>0&&te("button",{className:"btn btn-danger mr-5",onClick:function(){e.onClickDelete()}},void 0,te("span",{},void 0," Delete"))))))),te("div",{id:"scripts"}))}}]),t}(),oe=Object(c.b)({getDataLoading:F("getDataLoading"),tagsData:F("tagsData"),totalRows:F("totalRows"),submitAddSuccess:F("submitAddSuccess"),submitEditSuccess:F("submitEditSuccess"),submitDeleteSuccess:F("submitDeleteSuccess")});t.default=Object(u.compose)(L,M,Object(i.connect)(oe,function(e){return{getData:function(t){return e(function(e){return{type:y,payload:e}}(t))},submitAdd:function(t){return e(function(e){return{type:S,payload:e}}(t))},submitEdit:function(t){return e(function(e){return{type:_,payload:e}}(t))},submitDelete:function(t){return e(function(e){return{type:R,payload:e}}(t))}}}))(ae)}}]);